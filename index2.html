<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />
    <meta name="description" content="" />
    <meta name="author" content="" />
    <title>WEBGIS PONDOK PESANTREN AL-MUNAWWIR></title>
    <!-- Favicon-->
    <link rel="icon" type="image/x-icon" href="assets/favicon.ico" />
    <!-- Font Awesome icons -->
    <script src="https://use.fontawesome.com/releases/v6.3.0/js/all.js" crossorigin="anonymous"></script>
    <!-- Google fonts-->
    <link href="https://fonts.googleapis.com/css?family=Montserrat:400,700" rel="stylesheet" />
    <link href="https://fonts.googleapis.com/css?family=Roboto+Slab:400,100,300,700" rel="stylesheet" />
    <!-- Mapbox CSS -->
    <link href="https://api.mapbox.com/mapbox-gl-js/v3.15.0/mapbox-gl.css" rel="stylesheet">
    <link href="css/styles.css" rel="stylesheet" />
    <style>
        #mapbox-container { 
            width: 100%; 
            height: 600px; 
            border-radius: 8px;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
            position: relative;
            overflow: hidden;
        }
    </style>
</head>
<body id="page-top">
    <!-- Navigation-->
    <nav class="navbar navbar-expand-lg navbar-dark fixed-top" id="mainNav">
        <div class="container">
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarResponsive">
                Menu <i class="fas fa-bars ms-1"></i>
            </button>
            <div class="collapse navbar-collapse" id="navbarResponsive">
                <ul class="navbar-nav text-uppercase ms-auto py-4 py-lg-0">
                    <li class="nav-item"><a class="nav-link" href="#services">Map</a></li>
                    <li class="nav-item"><a class="nav-link" href="#team">Team</a></li>
                    <li class="nav-item"><a class="nav-link" href="#contact">Contact</a></li>
                </ul>
            </div>
        </div>
    </nav>

    <!-- Masthead-->
    <header class="masthead">
        <div class="container">
            <div class="masthead-subheading">Welcome To Our School!</div>
            <div class="masthead-heading text-uppercase">It's Nice To Meet You</div>
            <a class="btn btn-primary btn-xl text-uppercase" href="#services">Tell Me More</a>
        </div>
    </header>

    <!-- Map Section -->
    <section class="page-section" id="services">
        <div class="container">
            <div class="text-center">
                <h2 class="section-heading text-uppercase">Peta Pondok Pesantren Al-Munawwir</h2>
                <h3 class="section-subheading text-muted">Visualisasi geografis denah Pondok Pesantren</h3>
            </div>
            <div class="row">
                <div class="col-lg-12">
                    <div id="mapbox-container"></div>
                </div>
            </div>
        </div>
    </section>

    <!-- Team-->
    <section class="page-section bg-light" id="team">
        <div class="container">
            <div class="text-center">
                <h2 class="section-heading text-uppercase">Our Amazing Team</h2>
                <h3 class="section-subheading text-muted">Website Developer.</h3>
            </div>
            <div class="row">
                <div class="col-lg-4">
                    <div class="team-member">
                        <img class="mx-auto rounded-circle" src="assets\img\WhatsApp Image 2025-09-17 at 10.37.41_13671fde.jpg" alt="..." />
                        <h4>Prof. Dr. Ir. Muhammad Yunus, S.T., M.T., Ph.D. (Geomatics), IPU, ASEAN Eng.</h4>
                        <p class="text-muted">Chief Executive Officer</p>
                        <a class="btn btn-dark btn-social mx-2" href="#!" aria-label="Twitter Profile"><i class="fab fa-twitter"></i></a>
                        <a class="btn btn-dark btn-social mx-2" href="#!" aria-label="Facebook Profile"><i class="fab fa-facebook-f"></i></a>
                        <a class="btn btn-dark btn-social mx-2" href="#!" aria-label="LinkedIn Profile"><i class="fab fa-linkedin-in"></i></a>
                    </div>
                </div>
            </div>
            <div class="row">
                <div class="col-lg-8 mx-auto text-center">
                    <p class="large text-muted">
                        Educating the Qur'anic generation is not merely about teaching how to read religious texts, 
                        but about instilling values of good character, compassion, and independence. 
                        Our pesantren is a place where knowledgeable, faithful, and virtuous individuals are nurtured.
                    </p>
                </div>
            </div>
        </div>
    </section>

    <!-- Contact-->
    <section class="page-section" id="contact">
        <div class="container">
            <div class="text-center">
                <h2 class="section-heading text-uppercase">Contact Us</h2>
            </div>
            <form id="contactForm" data-sb-form-api-token="API_TOKEN">
                <div class="row align-items-stretch mb-5">
                    <div class="col-md-6">
                        <div class="form-group">
                            <input class="form-control" id="name" type="text" placeholder="Your Name *" data-sb-validations="required" />
                            <div class="invalid-feedback" data-sb-feedback="name:required">A name is required.</div>
                        </div>
                        <div class="form-group">
                            <input class="form-control" id="email" type="email" placeholder="Your Email *" data-sb-validations="required,email" />
                            <div class="invalid-feedback" data-sb-feedback="email:required">An email is required.</div>
                            <div class="invalid-feedback" data-sb-feedback="email:email">Email is not valid.</div>
                        </div>
                        <div class="form-group mb-md-0">
                            <input class="form-control" id="phone" type="tel" placeholder="Your Phone *" data-sb-validations="required" />
                            <div class="invalid-feedback" data-sb-feedback="phone:required">A phone number is required.</div>
                        </div>
                    </div>
                    <div class="col-md-6">
                        <div class="form-group form-group-textarea mb-md-0">
                            <textarea class="form-control" id="message" placeholder="Your Message *" data-sb-validations="required"></textarea>
                            <div class="invalid-feedback" data-sb-feedback="message:required">A message is required.</div>
                        </div>
                    </div>
                </div>
                <div class="d-none" id="submitSuccessMessage">
                    <div class="text-center text-white mb-3">
                        <div class="fw-bolder">Form submission successful!</div>
                    </div>
                </div>
                <div class="d-none" id="submitErrorMessage">
                    <div class="text-center text-danger mb-3">Error sending message!</div>
                </div>
                <div class="text-center">
                    <button class="btn btn-primary btn-xl text-uppercase disabled" id="submitButton" type="submit">Send Message</button>
                </div>
            </form>
        </div>
    </section>

    <!-- Footer-->
    <footer class="footer py-4">
        <div class="container">
            <div class="row align-items-center">
                <div class="col-lg-4 text-lg-start">Copyright &copy; Pondok Pesantren Al-Munawwir</div>
                <div class="col-lg-4 my-3 my-lg-0">
                    <a class="btn btn-dark btn-social mx-2" href="#!" aria-label="Twitter"><i class="fab fa-twitter"></i></a>
                    <a class="btn btn-dark btn-social mx-2" href="#!" aria-label="Facebook"><i class="fab fa-facebook-f"></i></a>
                    <a class="btn btn-dark btn-social mx-2" href="#!" aria-label="LinkedIn"><i class="fab fa-linkedin-in"></i></a>
                </div>
                <div class="col-lg-4 text-lg-end">
                    <a class="link-dark text-decoration-none me-3" href="#!">Privacy Policy</a>
                    <a class="link-dark text-decoration-none" href="#!">Terms of Use</a>
                </div>
            </div>
        </div>
    </footer>

    <!-- Scripts -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://api.mapbox.com/mapbox-gl-js/v3.15.0/mapbox-gl.js"></script>
    <script src="js/scripts.js"></script>
    <script src="https://cdn.startbootstrap.com/sb-forms-latest.js"></script>

    <!-- Mapbox Initialization -->
        <!-- Mapbox Initialization -->
    <script>
        mapboxgl.accessToken = 'pk.eyJ1IjoieXVudXMwNjEyMDQiLCJhIjoiY21nNnFrdTF6MGppajJqcGxkZ254d2U5NyJ9.zfFtDfwpGCqoMJYZTiYezQ';

        const map = new mapboxgl.Map({
            container: 'mapbox-container',
            style: 'mapbox://styles/mapbox/streets-v12',
            center: [110.361545097768882, -7.826993903257583],
            zoom: 16
        });

        map.addControl(new mapboxgl.NavigationControl());
        map.addControl(new mapboxgl.ScaleControl());

        map.on('load', function() {
            // Asrama Putra
            map.addSource('asrama_putra', { type: 'geojson', data: 'assets/Putra.geojson' });
            map.addLayer({
                id: 'fill_asramaputra',
                type: 'fill',
                source: 'asrama_putra',
                paint: { 'fill-color': '#1e6395', 'fill-opacity': 0.6 }
            });
            map.addLayer({
                id: 'outline_asramaputra',
                type: 'line',
                source: 'asrama_putra',
                paint: { 'line-color': 'black', 'line-width': 1 }
            });

            // Asrama Putri
            map.addSource('asrama_putri', { type: 'geojson', data: 'assets/Putri.geojson' });
            map.addLayer({
                id: 'fill_asramaputri',
                type: 'fill',
                source: 'asrama_putri',
                paint: { 'fill-color': '#ff6600', 'fill-opacity': 0.6 }
            });
            map.addLayer({
                id: 'outline_asramaputri',
                type: 'line',
                source: 'asrama_putri',
                paint: { 'line-color': 'black', 'line-width': 1 }
            });

            // Bangunan Umum
            map.addSource('bangunan_umum', { type: 'geojson', data: 'assets/ya ALLAH.geojson' });
            map.addLayer({
                id: 'fill_bangunanumum',
                type: 'fill',
                source: 'bangunan_umum',
                paint: { 'fill-color': '#ffc130', 'fill-opacity': 0.6 }
            });
            map.addLayer({
                id: 'outline_bangunanumum',
                type: 'line',
                source: 'bangunan_umum',
                paint: { 'line-color': 'black', 'line-width': 1 }
            });

            // === POPUP untuk semua layer ===
            const popupLayers = [
                {id: 'fill_asramaputra', title: 'Asrama Putra'},
                {id: 'fill_asramaputri', title: 'Asrama Putri'},
                {id: 'fill_bangunanumum', title: 'Bangunan Umum'}
            ];

            popupLayers.forEach(layer => {
                map.on('click', layer.id, function(e) {
                    const coordinates = e.lngLat;
                    const props = e.features[0].properties;
                    let html = `<div><h6>${layer.title}</h6><table class="table table-sm table-bordered">`;
                    for (let key in props) {
                        html += `<tr><td><strong>${key}</strong></td><td>${props[key]}</td></tr>`;
                    }
                    html += `</table></div>`;
                    new mapboxgl.Popup()
                        .setLngLat(coordinates)
                        .setHTML(html)
                        .addTo(map);
                });

                map.on('mouseenter', layer.id, () => map.getCanvas().style.cursor = 'pointer');
                map.on('mouseleave', layer.id, () => map.getCanvas().style.cursor = '');
            });

            // === Tambahkan Legenda ===
            const legend = document.createElement('div');
            legend.innerHTML = `
                <div style="background:white; padding:10px; border-radius:8px; font-size:14px; box-shadow:0 2px 6px rgba(0,0,0,0.3);">
                    <b>Legenda</b><br>
                    <span style="display:inline-block;width:15px;height:15px;background:#1e6395;margin-right:5px;"></span> Asrama Putra<br>
                    <span style="display:inline-block;width:15px;height:15px;background:#ff6600;margin-right:5px;"></span> Asrama Putri<br>
                    <span style="display:inline-block;width:15px;height:15px;background:#ffc130;margin-right:5px;"></span> Bangunan Umum
                </div>
            `;
            legend.style.position = 'absolute';
            legend.style.bottom = '20px';
            legend.style.right = '20px';
            map.getContainer().appendChild(legend);
        });
    </script>
</body>
</html>
